drop table if exists Users;
drop table if exists UserList;
drop table if exists Photos;
drop table if exists UserSessions;
drop table if exists UserSuggestions;
drop table if exists HowToPopularity;

CREATE TABLE UserSessions (
id int(11) NOT NULL auto_increment,
skey VARCHAR(32) NOT NULL,
session_start TIMESTAMP,
userid int(11) NOT NULL,
primary KEY (id)
);

CREATE TABLE HowToPopularity (
id int(11) NOT NULL auto_increment,
listitem int(11) NOT NULL,
primary KEY (id)
);

CREATE TABLE Users (
email VARCHAR(255) NOT NULL,
makerid int(11),
id int(11) NOT NULL auto_increment,
primary KEY (id)
);

CREATE TABLE UserList (
id int(11) NOT NULL auto_increment,
userid int(11) NOT NULL,
listid int(11) NOT NULL,
complete int(11),
primary KEY(id)
);

CREATE TABLE Photos (
id int(11) NOT NULL auto_increment,
userid int(11) NOT NULL,
filename varchar(255) NOT NULL,
url varchar(255),
listitem int(11) NOT NULL,
primary KEY (id)
);

CREATE TABLE UserSuggestions (
id int(11) NOT NULL auto_increment,
userid int(11) NOT NULL,
filename varchar(255) NOT NULL,
title varchar(255),
description varchar(255),
primary KEY (id)
);

drop table if exists List;
drop table if exists Makers;
drop table if exists Categories;
drop table if exists UserCategories;

CREATE TABLE Makers (
id int(11) NOT NULL auto_increment,
name VARCHAR(255) NOT NULL,
uri VARCHAR(255),
primary KEY (id)
);

CREATE TABLE Categories (
id int(11) NOT NULL auto_increment,
title VARCHAR(255) NOT NULL,
makerid int(11) NOT NULL,
approved int(11),
color VARCHAR(10) NOT NULL,
primary KEY (id)
);


CREATE TABLE UserCategories (
id int(11) NOT NULL auto_increment,
userid int(11) NOT NULL,
categoryid int(11) NOT NULL,
primary KEY (id)
);

CREATE TABLE List (
id int(11) NOT NULL auto_increment,
makerid int(11) NOT NULL,
title VARCHAR(255) NOT NULL,
description TEXT,
uri VARCHAR(255),
approved int(11),
category int(11),
primary KEY (id)
);

alter table Users add unique (email);
alter table Makers add unique (name);
alter table Makers add unique (uri);
alter table List add unique (uri);

insert into Makers (name, uri) values ('Creative Commons', 'http://creativecommons.org');

INSERT into Categories (approved, makerid, title, color) values (1, 1, "People", "ff9800");
INSERT into Categories (approved, makerid, title, color) values (1, 1, "Places & Cities", "f44336");
INSERT into Categories (approved, makerid, title, color) values (1, 1, "Clothing & Fashion", "3f51b5");
INSERT into Categories (approved, makerid, title, color) values (1, 1, "Nature & Animals", "4caf50");
INSERT into Categories (approved, makerid, title, color) values (1, 1, "Food & Drink", "2196f3");
INSERT into Categories (approved, makerid, title, color) values (1, 1, "Objects", "e91e63");

INSERT into List (makerid, title) values (1, "Matt Lee");

INSERT into List (makerid, title) values (2, "A park");
INSERT into List (makerid, title) values (2, "A playground");
INSERT into List (makerid, title) values (2, "An office building");
INSERT into List (makerid, title) values (2, "A food truck");
INSERT into List (makerid, title) values (2, "A bus stop");

INSERT into List (makerid, title) values (3, "A pair of shorts");
INSERT into List (makerid, title) values (3, "A funny t-shirt");
INSERT into List (makerid, title) values (3, "A hat");
INSERT into List (makerid, title) values (3, "A winter coat");
INSERT into List (makerid, title) values (3, "An umbrella");
INSERT into List (makerid, title) values (3, "A cool pair of shoes");

INSERT into List (makerid, title) values (4, "A tree");
INSERT into List (makerid, title) values (4, "A dog");
INSERT into List (makerid, title) values (4, "A cat");
INSERT into List (makerid, title) values (4, "Flowers");
INSERT into List (makerid, title) values (4, "A body of water");

INSERT into List (makerid, title) values (5, "Coffee");
INSERT into List (makerid, title) values (5, "Pizza");
INSERT into List (makerid, title) values (5, "Beer");
INSERT into List (makerid, title) values (5, "Wine");
INSERT into List (makerid, title) values (5, "A sandwich");
INSERT into List (makerid, title) values (5, "A salad");

INSERT into List (makerid, title) values (6, "A bicycle");
INSERT into List (makerid, title) values (6, "A lamp");
INSERT into List (makerid, title) values (6, "Science equipment");
INSERT into List (makerid, title) values (6, "Tools");
INSERT into List (makerid, title) values (6, "Kitchen utensils");

UPDATE List SET category = 1 where makerid = 1;
UPDATE List SET category = 2 where makerid = 2;
UPDATE List SET category = 3 where makerid = 3;
UPDATE List SET category = 4 where makerid = 4;
UPDATE List SET category = 5 where makerid = 5;
UPDATE List SET category = 6 where makerid = 6;

UPDATE List SET approved = 1;
